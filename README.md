# –°–±–æ—Ä—â–∏–∫ –ø–æ–≥–æ–¥—ã üå§

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–±–æ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ –∏–∑ 50 –∫—Ä—É–ø–Ω–µ–π—à–∏—Ö –≥–æ—Ä–æ–¥–æ–≤ –º–∏—Ä–∞.

–î–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–±–∏—Ä–∞–µ—Ç –ø–æ–≥–æ–¥—É –∏–∑ –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ API [openweathermap] –∏ 
—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
- [Python 3.10]
- [PostgreSQL 13.3]
- [SQLAlchemy]
- [alembic]
- [pydantic]
- [requests]

C –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ requests –∏ api_key –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ 
[openweathermap] –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –ø–æ 50 –≥–æ—Ä–æ–¥–∞–º —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª–µ 
cities.txt. –î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é —á–µ—Ä–µ–∑ pydantic –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –±–∞–∑—É 
–¥–∞–Ω–Ω—ã—Ö postgresql —á–µ—Ä–µ–∑ ORM SQLAlchemy. SQLAlchemy –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–≤—è–∑–∫–µ —Å 
alembic –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏ –∏–ª–∏ 
–∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å–æ–±–∏—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏: 

- –≥–æ—Ä–æ–¥
- —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
- –≤–ª–∞–∂–Ω–æ—Å—Ç—å
- —Å–∫–æ—Ä–æ—Å—Ç—å –≤–µ—Ç—Ä–∞
- –≤—Ä–µ–º—è –æ–±—Ä–∞—â–µ–Ω–∏—è

–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å–±–æ—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–ø–∏—Ä–∞—è—Å—å –Ω–∞ –¥–∞–Ω–Ω—ã–µ, 
–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–µ—Ä–≤–∏—Å. 

–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –≥–æ—Ä–æ–¥–∞ New York –≤—ã –º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å –Ω–∏–∂–µ. 
```json
{
   "coord": {
      "lon": -74.006,
      "lat": 40.7143
   },
   "weather": [
      {
         "id": 701,
         "main": "Mist",
         "description": "mist",
         "icon": "50n"
      }
   ],
   "base": "stations",
   "main": {
      "temp": 295.08,
      "feels_like": 294.97,
      "temp_min": 292.56,
      "temp_max": 297.53,
      "pressure": 1012,
      "humidity": 63
   },
   "visibility": 10000,
   "wind": {
      "speed": 2.24,
      "deg": 181,
      "gust": 3.13
   },
   "clouds": {
      "all": 0
   },
   "dt": 1685755381,
   "sys": {
      "type": 2,
      "id": 2008101,
      "country": "US",
      "sunrise": 1685698017,
      "sunset": 1685751681
   },
   "timezone": -14400,
   "id": 5128581,
   "name": "New York",
   "cod": 200
}
```
___
## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```
git clon git@github.com:Annsjaw/weather-collector.git
```
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é weather_collector_infra
```
cd weather_collector_infra
```
–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª **.env** —Å–≤–æ–∏–º–∏ —Å–µ–∫—Ä–µ—Ç–∞–º–∏ (–∏–ª–∏ –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –º–æ–∏–º–∏)
```python
# –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–∏—Å—É openweathermap (–ø–æ–ª—É—á–∏—Ç—å –º–æ–∂–Ω–æ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ)
API_KEY = a2857b9b09c3fd61976e5a31c24fe180

# –î–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
POSTGRES_DB=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
DB_HOST=db
DB_PORT=5432
DB_NAME=postgres
DB_USER=postgres
DB_PASS=postgres
```
–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Docker - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```
docker-compose up -d --build
```

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—Ä–∞–∑—É –Ω–∞—á–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –±—É–¥–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å 
–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–≥–æ–¥–µ –∫–∞–∂–¥—ã–µ 60 –º–∏–Ω—É—Ç.
___
‚ö†Ô∏è **–í–ê–ñ–ù–û!**

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç–æ–∫–µ–Ω–∞ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ –µ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ, **60** 
–æ–±—Ä–∞—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É. –î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑–±–∏—Ç—å 
–æ–±—Ä–∞—â–µ–Ω–∏—è –ø–æ —Ç–∞–π–º–µ—Ä—É –∏–ª–∏ –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –æ–¥–Ω—É –∏–∑ –ø–ª–∞—Ç–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫.


[//]: #

   [SQLAlchemy]: <https://pypi.org/project/SQLAlchemy/>
   [PostgreSQL 13.3]: <https://www.postgresql.org/docs/13/release-13-3.html>
   [alembic]: <https://pypi.org/project/alembic/>
   [pydantic]: <https://pypi.org/project/pydantic/>
   [requests]: <https://pypi.org/project/requests/>
   [Python 3.10]: <https://www.python.org/downloads/release/python-3100/>
   [openweathermap]: <https://openweathermap.org>
